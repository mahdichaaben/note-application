<%- include('partials/header'); -%>


    <h1>signin</h1>

  <form >
    <label for="email">email</label>
    <input type="email" id="email" name="email" required>
    <div class="email error"></div>

    <label for="password">password</label>
    <input type="password" id="password" name="password" required>
    <div class="password error"></div>
    <button type="submit">signin</button>
  </form>
  <script>
    const form=document.querySelector("form")
    form.addEventListener("submit",async (e)=>{
      // bech negilijiw el default event eli howa refresh and ba3th post request 
      e.preventDefault();
      const email=form.email.value
        const password=form.password.value
        const emailerror=document.querySelector(".email.error")
        const passworderror=document.querySelector(".password.error");
         // reset --errors
        emailerror.textContent='';
              passworderror.textContent=''; 
        try{
            const res=await fetch('/signin',{
              method:"POST",body:JSON.stringify({email:email,password:password})
              ,headers:{'content-Type':"application/json"}})
              const data=await res.json();
              if(data.errors){
              emailerror.textContent=data.errors.email;
              passworderror.textContent=data.errors.password ; 
            }else{ window.location.assign('/');}
           
     
             
            }
           
            
      
      catch(err){
       

      }
      })
  

  
  </script>



<%- include('partials/footer'); -%>